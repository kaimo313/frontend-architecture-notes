上一节讲了可读流，在讲可写流之前得了解一下链表。

比如：并发往文件中写入数据

```js
write("1");
write("2");
write("3");
```

每次写都会开个线程，上面的写入可能出现 `123`，`321`，`213`...

node 中主线程是单线程，没有锁的概念。

怎么解决这种问题？

## 线性的数据结构

**队列**：比如宏任务微任务就是队列，从第一个开始取出来执行，先进先出

- 入队：`arr.push`
- 出队： `arr.shift`

**栈结构**：代码执行会销毁的顺序，就是一个栈型结构，先进后出

- 入栈：`arr.push`
- 出栈：`arr.pop`

**链表**：链表从头和尾取值性能高，也能存放数据，平均查询的复杂度是 `O(n)`，基于链表可以实现队列的封装，没有数组的塌陷问题。

- 单向链表：每个节点有 next 属性指向下一个，头指向第一个元素
- 单向循环链表：最后一个元素指向头部
- 双向链表：两个指针分别指向前一个和后一个
- 双向循环链表：两个指针分别指向前一个和后一个，第一个的前一个指向尾，最后的后一个指向头
- 环形链表：最后一个元素的 next 指向了其他的节点
